{"version":3,"sources":["../../src/components/mobile_nav.js"],"names":[],"mappings":"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","file":"mobile_nav.js","sourcesContent":["//Libraries\nconst React    = require(\"react\")\n    , ReactDOM = require('react-dom')\n    , _        = require(\"lodash\");\n\n\nlet mixins = require(\"morse-react-mixins\");\nconst [checker, cssMixins, textMixins, widthsMixins]  = [mixins.checker, mixins.css_mixins, mixins.text_mixins, mixins.widths_mixins];\n\n//Flux\nconst NavItemsActions = require(\"../actions/navitems_actions\")\n    , NavItemsStore   = require(\"../stores/navitems_store\");\n\n\n//Compenents\nconst Navitem = require(\"./nav_item\");\n\nclass MobileNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.nav = [\"nav-list\", \"mobile-nav-list\", {hidden:true}]\n    this.state = {\n      active:null\n    , device:\"mobile\"\n    , level: 0\n    , nav_css:this.getClasses(this.nav)\n    , nav_items:[]\n    , previous:[]\n    , roots:[]\n    };\n  }\n\n  // Lifecycle\n  componentWillMount(){\n    this.setState({roots:NavItemsStore._getRoots()})\n  }\n\n  componentDidMount(){\n    NavItemsStore.addChangeListener(\"fetched\", this._getNavItems.bind(this));\n  }\n\n  // Morse\n  _getNavItems(){\n    if(checker.isMounted(this)){\n       this.setState({\n        roots:NavItemsStore._getRoots()\n      , nav_items: []\n      , secondary:[]\n      , tertiary:[]\n      , quaternary:[]\n      });\n    }\n\n  }\n\n  _getPrevious(){\n    return this.state.previous[this.state.level]\n  }\n\n  _getVisible(){\n    return (this.state.level === 0) ? this.state.roots : this.state.nav_items;\n\n  }\n\n  _setPrevious(level){\n    let previous = this.state.previous;\n    previous[level] = _.cloneDeep(this.state.active);\n    return previous\n  }\n\n  // Events\n  _nextLevel(id){\n    // console.log(NavItemsStore.getSubs(id), id)\n    // let active = NavItemsStore.getItem(id)\n    this.setState({\n        active    : NavItemsStore.getItem(id)\n      , level     : this.state.level + 1\n      , nav_items : NavItemsStore.getSubs(id)\n      , previous  : this._setPrevious(this.state.level + 1)\n    })\n  }\n\n  _openNav(e){\n    e.preventDefault();\n    this.nav = this.toggleCss(this.nav);\n    this.setState({nav_css:this.getClasses(this.nav)})\n  }\n\n  _upLevel(e){\n    e.preventDefault();\n    let previous = this._getPrevious();\n    if(previous){\n      let id = previous.id\n      this.setState({\n          active    : previous\n        , level     : this.state.level - 1\n        , nav_items : NavItemsStore.getSubs(id)\n      });\n    } else {\n      this.setState({active:null, level: this.state.level - 1});\n    }\n  }\n\n  // Render functions\n  _renderActive(){\n    if(checker.checkOject(this.state.active)){\n      return (\n        <li className=\"current-section\"><a href={this.state.active.path}>In {this.state.active.title}</a></li>\n      );\n    }\n\n    return \"\"\n  }\n\n  _renderBack(){\n    let previous = this._getPrevious();\n    let title = (previous) ? previous.title : \"Main Menu\"\n    if(this.state.level > 0){\n      return (\n        <li className=\"previous-section\"><a href=\"#\" onClick={this._upLevel.bind(this)}>Back to {title}</a></li>\n      );\n    }\n\n    return \"\"\n  }\n\n  _renderLinks(){\n    let links = this._getVisible();\n    if(checker.checkArray(links)){\n      return _.map(links, (ni)=>{\n        return (<Navitem key={ni.id} ref={ni.id} item={ni} onClick={this._nextLevel.bind(this)} device={this.props.device} />);\n      });\n    }\n\n    return \"\";\n  }\n\n  render(){\n    return (\n      <div className=\"nav-holder\">\n        <a className=\"open-nav\" href=\"#\" onClick={this._openNav.bind(this)}>\n          <i className=\"icon-hamburger\"></i>\n          <span className=\"hidden\">Open Nav</span></a>\n        <ul className={this.state.nav_css}>\n          {this._renderBack()}\n          {this._renderActive()}\n          {this._renderLinks()}\n        </ul>\n      </div>\n    )\n  }\n}\n\nObject.assign(MobileNav.prototype, cssMixins);\nObject.assign(MobileNav.prototype, textMixins);\nObject.assign(MobileNav.prototype, widthsMixins);\n\nmodule.exports = MobileNav;"]}