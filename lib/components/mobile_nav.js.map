{"version":3,"sources":["../../src/components/mobile_nav.js"],"names":[],"mappings":"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","file":"mobile_nav.js","sourcesContent":["//Libraries\nconst React    = require(\"react\")\n    , ReactDOM = require('react-dom')\n    , _        = require(\"lodash\");\n\n\nlet mixins = require(\"morse-react-mixins\");\nconst [checker, cssMixins, textMixins, widthsMixins]  = [mixins.checker, mixins.css_mixins, mixins.text_mixins, mixins.widths_mixins];\n\n//Flux\nconst NavItemsActions = require(\"../actions/navitems_actions\")\n    , NavItemsStore   = require(\"../stores/navitems_store\");\n\n\n//Compenents\nconst Navitem = require(\"./nav_item\");\n\nclass MobileNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.nav = [\"nav-list\", \"mobile-nav-list\", {hidden:true}]\n    this.state = {\n      active:null\n    , device:\"mobile\"\n    , level: 0\n    , nav_css:this.getClasses(this.nav)\n    , nav_items:[]\n    , previous:[]\n    , roots:[]\n    };\n  }\n\n  // Lifecycle\n  componentWillMount(){\n    this.setState({roots:NavItemsStore._getRoots()})\n  }\n\n  componentDidMount(){\n    NavItemsStore.addChangeListener(\"fetched\", this._getNavItems.bind(this));\n  }\n\n  // Morse\n  _getNavItems(){\n    if(checker.isMounted(this)){\n       this.setState({\n        roots:NavItemsStore._getRoots()\n      , nav_items: []\n      , secondary:[]\n      , tertiary:[]\n      , quaternary:[]\n      });\n    }\n\n  }\n\n  _getPrevious(){\n    return this.state.previous[this.state.level];\n  }\n\n  _getVisible(){\n    return (this.state.level === 0) ? this.state.roots : this.state.nav_items;\n\n  }\n\n  _setPrevious(level){\n    let previous = this.state.previous;\n    previous[level] = _.cloneDeep(this.state.active);\n    return previous\n  }\n\n  // Events\n  _nextLevel(id){\n    // console.log(NavItemsStore.getSubs(id), id)\n    // let active = NavItemsStore.getItem(id)\n    this.setState({\n        active    : NavItemsStore.getItem(id)\n      , level     : this.state.level + 1\n      , nav_items : NavItemsStore.getSubs(id)\n      , previous  : this._setPrevious(this.state.level + 1)\n    })\n  }\n\n  _openNav(e){\n    e.preventDefault();\n    this.nav = this.toggleCss(this.nav);\n    this.setState({nav_css:this.getClasses(this.nav)})\n  }\n\n  _upLevel(e){\n    e.preventDefault();\n    let previous = this._getPrevious();\n    if(previous){\n      let id = previous.id\n      this.setState({\n          active    : previous\n        , level     : this.state.level - 1\n        , nav_items : NavItemsStore.getSubs(id)\n      });\n    } else {\n      this.setState({active:null, level: this.state.level - 1});\n    }\n  }\n\n  // Render functions\n  _renderActive(){\n    if(checker.checkOject(this.state.active)){\n      return (\n        <li className=\"current-section\"><a href={this.state.active.path}>In {this.state.active.title}</a></li>\n      );\n    }\n\n    return \"\"\n  }\n\n  _renderBack(){\n    let previous = this._getPrevious();\n    let title = (previous) ? previous.title : \"Main Menu\"\n    if(this.state.level > 0){\n      return (\n        <li className=\"previous-section\"><a href=\"#\" onClick={this._upLevel.bind(this)}>Back to {title}</a></li>\n      );\n    }\n\n    return \"\"\n  }\n\n  _renderLinks(){\n    let links = this._getVisible();\n    if(checker.checkArray(links)){\n      return _.map(links, (ni)=>{\n        return (<Navitem key={ni.id} ref={ni.id} item={ni} onClick={this._nextLevel.bind(this)} device={this.props.device} />);\n      });\n    }\n\n    return \"\";\n  }\n\n  render(){\n    return (\n      <div className=\"nav-holder\">\n        <a className=\"open-nav\" href=\"#\" onClick={this._openNav.bind(this)}>\n          <i className=\"icon-hamburger\"></i>\n          <span className=\"hidden\">Open Nav</span></a>\n        <ul className={this.state.nav_css}>\n          {this._renderBack()}\n          {this._renderActive()}\n          {this._renderLinks()}\n        </ul>\n      </div>\n    )\n  }\n}\n\nObject.assign(MobileNav.prototype, cssMixins);\nObject.assign(MobileNav.prototype, textMixins);\nObject.assign(MobileNav.prototype, widthsMixins);\n\nmodule.exports = MobileNav;"]}