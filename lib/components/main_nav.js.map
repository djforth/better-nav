{"version":3,"sources":["../../src/components/main_nav.js"],"names":[],"mappings":";;;;;;;;;;;AACA,IAAM,QAAW,QAAQ,OAAR,CAAX;IACA,WAAW,QAAQ,WAAR,CAAX;IACA,IAAW,QAAQ,QAAR,CAAX;;;AAGN,IAAM,iBAAiB,QAAQ,wBAAR,CAAjB;;;;AAIN,IAAI,SAAS,QAAQ,oBAAR,CAAT;IACG,UAAkD,OAAO,OAAP;IAAzC,YAAyD,OAAO,UAAP;IAA9C,aAAiE,OAAO,WAAP;IAArD,eAAyE,OAAO,aAAP;;;;AAGhH,IAAM,kBAAkB,QAAQ,6BAAR,CAAlB;IACA,gBAAkB,QAAQ,0BAAR,CAAlB;;;AAGN,IAAM,UAAU,QAAQ,eAAR,CAAV;IACA,SAAU,QAAQ,cAAR,CAAV;;IAGA;;;AACJ,WADI,OACJ,CAAY,KAAZ,EAAmB;0BADf,SACe;;uEADf,oBAEI,QADW;;AAEjB,oBAAgB,aAAhB,CAA8B,MAAK,KAAL,CAAW,QAAX,CAA9B;;AAFiB,SAIjB,CAAK,KAAL,GAAa;AACX,cAAO,QAAP;KADF,CAJiB;;GAAnB;;;;eADI;;wCAWe;AACjB,WAAK,MAAL,GAAc,IAAI,cAAJ,EAAd,CADiB;AAEjB,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,SAAZ,EAAd,CAFiB;AAGjB,WAAK,EAAL,GAAU,KAAK,MAAL,CAAY,SAAZ,CAAsB,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAAtB,CAAV,CAHiB;;AAKjB,WAAK,QAAL,CAAc,EAAC,QAAO,KAAK,MAAL,EAAtB,EALiB;AAMjB,oBAAc,iBAAd,CAAgC,SAAhC,EAA2C,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA3C,EANiB;AAOjB,sBAAgB,MAAhB,CAAuB,KAAK,KAAL,CAAW,WAAX,CAAvB,CAPiB;;;;2CAUI;AACrB,WAAK,MAAL,CAAY,cAAZ,CAA2B,KAAK,EAAL,CAA3B,CADqB;AAErB,oBAAc,oBAAd,CAAmC,SAAnC,EAA8C,KAAK,YAAL,CAA9C,CAFqB;AAGrB,oBAAc,oBAAd,CAAmC,SAAnC,EAA8C,KAAK,UAAL,CAA9C,CAHqB;;;;;;;oCAOP,QAAQ,MAAK;;AAE3B,UAAG,KAAK,KAAL,CAAW,MAAX,KAAsB,MAAtB,EAA6B;AAC9B,aAAK,MAAL,GAAc,MAAd,CAD8B;AAE9B,aAAK,QAAL,CAAc,EAAC,QAAO,KAAK,MAAL,EAAtB,EAF8B;OAAhC;;AAKA,WAAK,IAAL,GAAc,IAAd,CAP2B;;;;iCAUjB;;AAEV,oBAAc,oBAAd,CAAmC,SAAnC,EAA8C,KAAK,UAAL,CAA9C,CAFU;AAGV,QAAE,KAAF,CAAQ,YAAI;AACV,wBAAgB,SAAhB,GADU;OAAJ,CAAR,CAHU;;;;6BAQJ;AACN,UAAG,KAAK,KAAL,CAAW,MAAX,KAAsB,QAAtB,EAA+B;AAChC,eAAQ,oBAAC,MAAD,IAAQ,QAAQ,KAAK,KAAL,CAAW,MAAX,EAAhB,CAAR,CADgC;OAAlC;;AAIA,aAAQ,oBAAC,OAAD,IAAS,QAAQ,KAAK,KAAL,CAAW,MAAX,EAAjB,CAAR,CALM;;;;SA9CJ;EAAgB,MAAM,SAAN;;AA0DtB,OAAO,MAAP,CAAc,QAAQ,SAAR,EAAmB,SAAjC;AACA,OAAO,MAAP,CAAc,QAAQ,SAAR,EAAmB,UAAjC;AACA,OAAO,MAAP,CAAc,QAAQ,SAAR,EAAmB,YAAjC;;AAEA,OAAO,OAAP,GAAiB,OAAjB","file":"main_nav.js","sourcesContent":["//Libraries\nconst React    = require(\"react\")\n    , ReactDOM = require('react-dom')\n    , _        = require(\"lodash\");\n\n// Morse Libraies\nconst ViewportDetect = require(\"viewport-detection-es6\");\n\n// const checker = require(\"../utils/checker\");\n\nlet mixins = require(\"morse-react-mixins\");\nconst [checker, cssMixins, textMixins, widthsMixins]  = [mixins.checker, mixins.css_mixins, mixins.text_mixins, mixins.widths_mixins];\n\n//Flux\nconst NavItemsActions = require(\"../actions/navitems_actions\")\n    , NavItemsStore   = require(\"../stores/navitems_store\");\n\n//Compenents\nconst Desktop = require(\"./desktop_nav\")\n    , Mobile  = require(\"./mobile_nav\");\n\n\nclass MainNav extends React.Component {\n  constructor(props) {\n    super(props);\n    NavItemsActions.prerenderItem(this.props.navitems)\n    // let root = NavItemsStore._getRoots();\n    this.state = {\n      device:\"mobile\"\n    };\n  }\n\n  //Lifecycle\n  componentDidMount(){\n    this.detect = new ViewportDetect();\n    this.device = this.detect.getDevice();\n    this.id = this.detect.trackSize(this._onDeviceChange.bind(this));\n\n    this.setState({device:this.device})\n    NavItemsStore.addChangeListener(\"api_set\", this._fetchData.bind(this));\n    NavItemsActions.setApi(this.props.navitemsApi);\n  }\n\n  componentWillUnmount() {\n    this.detect.removeCallback(this.id);\n    NavItemsStore.removeChangeListener(\"fetched\", this._getNavItems);\n    NavItemsStore.removeChangeListener(\"api_set\", this._fetchData);\n  }\n\n  // event handlers\n  _onDeviceChange(device, size){\n\n    if(this.state.device !== device){\n      this.device = device;\n      this.setState({device:this.device})\n    }\n\n    this.size   = size;\n  }\n\n  _fetchData(){\n\n    NavItemsStore.removeChangeListener(\"api_set\", this._fetchData);\n    _.defer(()=>{\n      NavItemsActions.fetchData()\n    });\n  }\n\n  render(){\n    if(this.state.device === \"mobile\"){\n      return (<Mobile device={this.state.device} />)\n    }\n\n    return (<Desktop device={this.state.device} />)\n\n\n  }\n\n}\n\nObject.assign(MainNav.prototype, cssMixins);\nObject.assign(MainNav.prototype, textMixins);\nObject.assign(MainNav.prototype, widthsMixins);\n\nmodule.exports = MainNav;"]}