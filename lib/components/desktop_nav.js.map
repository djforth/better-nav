{"version":3,"sources":["../../src/components/desktop_nav.js"],"names":[],"mappings":"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","file":"desktop_nav.js","sourcesContent":["//Libraries\nconst React    = require(\"react\")\n    , ReactDOM = require('react-dom')\n    , _        = require(\"lodash\");\n\n\nlet mixins = require(\"morse-react-mixins\");\nconst [checker, cssMixins, textMixins, widthsMixins]  = [mixins.checker, mixins.css_mixins, mixins.text_mixins, mixins.widths_mixins];\n\n//Flux\nconst NavItemsActions = require(\"../actions/navitems_actions\")\n    , NavItemsStore   = require(\"../stores/navitems_store\");\n\n\n//Compenents\nconst Navitem = require(\"./nav_item\")\n     , TouchNav = require(\"touch-nav\");\n\n\nclass DesktopNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.clearNav;\n    this.state = {\n      device:\"mobile\"\n    , roots:[]\n    , secondary:[]\n    , tertiary:[]\n    , quaternary:[]\n    };\n  }\n\n  // Lifecycle\n  componentWillMount(){\n    this.setState({roots:NavItemsStore._getRoots()})\n  }\n\n  componentDidMount(){\n    NavItemsStore.addChangeListener(\"fetched\", this._getNavItems.bind(this));\n  }\n\n  // Morse defined\n  _renderLinks(items, cb){\n    if(checker.checkArray(items)){\n      return _.map(items, (ri)=>{\n        return (<Navitem key={ri.id} ref={ri.id} item={ri} mouseEnter={cb} device={this.props.device} />);\n      })\n    }\n\n    return \"\"\n  }\n\n  _renderSecondary(){\n    if(checker.checkArray(this.state.secondary)){\n      let root = this.state.activeRoot\n      if(NavItemsStore._getLevels() === 1){\n        return(\n          <div className=\"nav-list level-1\">\n            {this._renderTitle(root, \"home-link\")}\n            <TouchNav\n              ref      = \"touch-nav\"\n              navitems = {NavItemsStore.prepForTouchNav(this.state.secondary)}\n              ul_css   = \"secondary-nav-touch-list\"\n              main_css = \"touch-sub-nav\"\n            />\n          </div>\n        );\n      }\n\n      return (\n        <div className=\"levels level-2\">\n          {this._renderTitle(root, \"clearfix home-link\")}\n\n          <ul className=\"nav-list secondary-nav-list\">\n            {this._renderLinks(this.state.secondary, this._setTertiary.bind(this))}\n          </ul>\n        </div>);\n    }\n\n    return \"\";\n  }\n\n  _renderTertiary(){\n    if(checker.checkArray(this.state.tertiary)){\n      return (\n        <div className=\"levels level-3\">\n          {this._renderTitle(this.state.activeSecondary)}\n          <ul className=\"nav-list tertiary-nav-list\">\n            {this._renderLinks(this.state.tertiary, this._setQuaternary.bind(this))}\n          </ul>\n        </div>);\n    }\n\n    return \"\";\n  }\n\n  _renderQuaternary(){\n    if(checker.checkArray(this.state.quaternary)){\n      return (\n        <div className=\"levels level-4\">\n          {this._renderTitle(this.state.activeTertiary)}\n          <ul className=\"nav-list quaternary-nav-list\">\n            {this._renderLinks(this.state.quaternary, null)}\n          </ul>\n        </div>\n      );\n    }\n\n    return \"\";\n  }\n\n  _renderTitle(root, css=\"title-link\"){\n    if(root) return (<div className={css}><a href={root.path}>In {root.title}</a></div>);\n\n    return \"\"\n  }\n\n\n  _getNavItems(){\n    this.setState({\n      roots:NavItemsStore._getRoots()\n    , secondary:[]\n    , tertiary:[]\n    , quaternary:[]\n    });\n  }\n\n\n  _setSecondary(id){\n    this.setState({\n      activeRoot:NavItemsStore.getItem(id)\n    , secondary:NavItemsStore.getSubs(id)\n    , tertiary:[]\n    , quaternary:[]\n    });\n  }\n\n  _setTertiary(id){\n    this.setState({\n      activeSecondary:NavItemsStore.getItem(id)\n    , tertiary:NavItemsStore.getSubs(id)\n    , quaternary:[]\n    });\n  }\n\n  _setQuaternary(id){\n    this.setState({\n      activeTertiary:NavItemsStore.getItem(id)\n    , quaternary:NavItemsStore.getSubs(id)\n    });\n  }\n\n  _closeNav(e){\n    this.clearNav = window.setTimeout(()=>{\n      // console.log(\"mouse out\")\n      NavItemsActions.setActive(null)\n      this._getNavItems();\n    }, 500);\n  }\n\n  _leaveOpen(e){\n    // console.log('mouse enter');\n    clearTimeout(this.clearNav);\n  }\n\n  render(){\n    return (\n      <div className=\"desktopNav\" onMouseLeave={this._closeNav.bind(this)} onMouseEnter={this._leaveOpen.bind(this)}>\n        <div className=\"nav-holder\">\n          <ul className=\"nav-list primary-nav-list\">\n            {this._renderLinks(this.state.roots, this._setSecondary.bind(this))}\n          </ul>\n        </div>\n        <div className=\"clearfix sub-holder single\">\n          {this._renderSecondary()}\n          {this._renderTertiary()}\n          {this._renderQuaternary()}\n        </div>\n      </div>)\n  }\n\n}\n\nObject.assign(DesktopNav.prototype, cssMixins);\nObject.assign(DesktopNav.prototype, textMixins);\nObject.assign(DesktopNav.prototype, widthsMixins);\n\nmodule.exports = DesktopNav;"]}